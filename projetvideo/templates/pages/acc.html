{% extends 'bases/base.html' %}

{% block main %}
<section class="fdb-block" style="background-image: url(imgs/hero/red.svg);">
    <div class="container">
            <div class="row pb-3">
                <div class="col text-center">
                <h1> Categories</h1>
                </div>
            </div>
            <div class="row pt-5 justify-content-center align-items-center">
                <div v-for="cat in categorys" class="col-3">
                <a v-bind:href='"http://127.0.0.1:8000/category/" + cat.id'>
                    <img alt="image" class="img-fluid" v-bind:src="cat.img" style=" height: 200px;">
                </a>
                <h2>${ cat.titre }</h2>
                </div>  
            </div>
    </div>
<div class="container">
    <div class="row text-center">
    <div class="col">
        <h1 class="text-white">MODULES</h1>
    </div>
    </div>
    <h1>    Modules</h1>
    <div class="row mt-5 align-items-center">
    <div class="col-12 col-sm-10 col-md-8 m-auto col-lg-4 text-center">
        <div class="fdb-box p-4">
            <img src="https://blog.savoirfairelinux.com/fr-ca/wp-content/uploads/2017/11/Python-Logo-PNG-Image-300x150.png" style=" height: 200px;">
        <h2>Python</h2>
        <p class="lead">Far far away, behind the word mountains, far from the countries Vokalia.</p>

        <p class="h1 mt-5 mb-5">jetons: 99</p>

        <p><a href="https://www.froala.com" class="btn btn-dark">Commencer</a></p>
        </div>
    </div>

    <div class="col-12 col-sm-10 col-md-8 m-auto col-lg-4 text-center pt-4 pt-lg-0">
        <div class="fdb-box px-4 pt-5">
            <img src="https://lh3.googleusercontent.com/F5B6GGdo6tAVNApr2X2p35igQhYBouuPA3uuIu3LEPHsIl7JPMHA1sn4-5J2B78JWA=s180" style=" height: 200px;">
        <h2>Flutter</h2>
        <p class="lead">Separated they live in Bookmarksgrove right at the coast, a large language ocean.</p>

        <p class="h1 mt-5 mb-5">jetons: 299</p>

        <p><a href="https://www.froala.com" class="btn btn-secondary">Commencer</a></p>
        </div>
    </div>

    <div class="col-12 col-sm-10 col-md-8 m-auto col-lg-4 text-center pt-4 pt-lg-0">
        <div class="fdb-box p-4">
            <img src="http://www.dl-integrateur-web.com/wp-content/themes/dlintegrateur/styles/images/html5-css3-js.png" style=" height: 200px;">
        <h2>Font-end</h2>
        <p class="lead">Even the all-powerful Pointing has no control about the blind texts it is an almost life.</p>

        <p class="h1 mb-5 mt-5">jetons: 799</p>

        <p><a href="https://www.froala.com" class="btn btn-dark">Commencer</a></p>
        </div>
    </div>
    </div>
</div>
</section>
{% endblock %}


{% block vue %}
<script>
var app = new Vue({
    el: '#app',
    data: {
        loader: true,
        content:false,
        modules: [],
        categorys:[],
        id_list: [],
    },
    delimiters: ["${","}"],
    mounted(){
        this.get_menu()
    },
    methods: {
        get_modules: function(){
            var now = new Date();
            axios.get('http://127.0.0.1:8000/Module/')
                .then(response => {
                    this.modules = response.data
                })
                .catch((err) => {
                    console.log(err);
                })
        },
        get_categorys: function(){
            var now = new Date();
            axios.get('http://127.0.0.1:8000/api/categorie/')
                .then(response => {
                    this.loader=false
                    this.content=true
                    this.categorys = response.data
                    this.actu_cat()
                })
                .catch((err) => {
                    console.log(err);
                })
        },
        actu_cat: function(){
            this.categorys.forEach(category => {
                for(var i=0; i<category.categorie_plat.length; i++){
                    if(!this.id_list.includes(category.categorie_plat[i].id)){
                        category.categorie_plat.splice(i, 1);
                    }
                }
            });
        }
    }
})
</script>
{% endblock vue %}
    